# 1 元类
- 类和元类
    - 类用来创建实例对象
    - 元类用来创建类（元类是最底层的东西，万物之主）


- 类就是一组用来描述如何生成一个对象的代码段
- 类同样也是一种对象。是的，没错，就是对象。只要你使用关键字class，Python解释器在执行的时候就会创建一个对象。
- 类的本质仍然是一个对象，于是乎你可以对它做如下的操作：
    你可以将它赋值给一个变量
    你可以拷贝它
    你可以为它增加属性
    你可以将它作为函数参数进行传递
    参考案例003
    
# 2 元类是是什么?
- 元类就是用来创建这些类（对象）的，元类就是类的类，你可以这样理解为：
    MyClass = MetaClass() # 使用元类MetaClass创建出一个对象，这个对象MyClass称为“类”
    my_object = MyClass() # 使用“类”MyClass来创建出实例对象my_object

- type就是一个元类，用来创建类的元类，使用type创建类：
    MyClass = type('MyClass', (), {})
    
    函数type实际上是一个元类。
    type就是Python在背后用来创建所有类的元类。
    现在你想知道那为什么type会全部采用小写形式而不是Type呢？
    好吧，我猜这是为了和str保持一致性，
    str是用来创建字符串对象的类，
    而int是用来创建整数对象的类。
    type就是创建类对象的类。
    你可以通过检查__class__属性来看到这一点。
    Python中所有的东西，注意，我是指所有的东西——都是对象。
    这包括整数、字符串、函数以及类。
    它们全部都是对象，而且它们都是从一个类创建而来，这个类就是type。
    
    参考案例004/005/006
    
- 元类的主要目的就是为了当创建类时能够自动地改变类：
    假想一个很傻的例子，你决定在你的模块里所有的类的属性都应该是大写形式。
    有好几种方法可以办到，但其中一种就是通过在模块级别设定__metaclass__。
    采用这种方法，这个模块中的所有类都会通过这个元类来创建，
    我们只需要告诉元类把所有的属性都改成大写形式就万事大吉了。
    
    元类本身而言，它们其实是很简单的：
        拦截类的创建
        修改类
        返回修改之后的类
        
- “元类就是深度的魔法，99%的用户应该根本不必为此操心。
    如果你想搞清楚究竟是否需要用到元类，那么你就不需要它。
    那些实际用到元类的人都非常清楚地知道他们需要做什么，
    而且根本不需要解释为什么要用元类。” 
                —— Python界的领袖 Tim Peters
                
# 3 元类实现ORM   
- ORM是什么？
    ORM 是 python编程语言后端web框架 Django的核心思想，
    “Object Relational Mapping”，即对象-关系映射，简称ORM。
    对象（Python）---关系(数据库)

    一个句话理解就是：创建一个实例对象，用创建它的类名当做数据表名，
    用创建它的类属性对应数据表的字段，当对这个实例对象操作时，能够对应MySQL语句

    class User(父类省略):
    uid = ('uid', "int unsigned")
    name = ('username', "varchar(30)")
    email = ('email', "varchar(30)")
    password = ('password', "varchar(30)")
    ...省略...

    u = User(uid=12345, name='Michael', email='test@orm.org', password='my-pwd')
    u.save()
    # 对应如下sql语句
    # insert into User (username,email,password,uid) values ('Michael','test@orm.org','my-pwd',12345)           

- 说明
    所谓的ORM就是让开发者在操作数据库的时候，能够像操作对象时通过xxxx.属性=yyyy一样简单，这是开发ORM的初衷
    只不过ORM的实现较为复杂，Django中已经实现了很复杂的操作，
    下面主要通过完成一个 insert相类似的ORM，理解其中的道理就就可以了
    ORM就是将复杂的SQL语句转变为简单的对象属性操作(大量的SQL语句开发效率很低)
    
- ORM类似案例
    

 
